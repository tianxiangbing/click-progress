!function(t,i){"function"==typeof define&&define.amd?define(["$"],i):"object"==typeof exports?module.exports=i():t.ClickProgress=i(window.Zepto||window.jQuery||$)}(this,function(t){function i(){}return t.fn.ClickProgress=function(e){var n=[];return t(this).each(function(){var r=new i,s=t.extend({trigger:t(this)},e);r.init(s),n.push(r)}),n},i.prototype={init:function(i){this.settings=i,this.trigger=t(i.trigger),this.target=t(i.target),this.v=i.v||10,this.dv=this.v,this.a=i.a||1,this.da=this.a,this.change=i.change||"height",this.time=i.time||30,this.range="height"==this.change?t(this.target).height():t(this.target).width(),this.finish=this.target.children().first(),this.full=this.target[this.change](),this.power=1,this.bindEvent()},touch:function(i,e,n){function r(t){return n.call(this,t)}var s;"function"==typeof e&&(n=e),t(i).on("touchmove",e,function(t){s=!0}).on("touchend",e,function(t){if(t.preventDefault(),!s){var i=n.call(this,t,"touch");i===!1&&(t.preventDefault(),t.stopPropagation())}s=!1}),t(i).on("mousedown",e,r)},bindEvent:function(){var t=this;this.touch(this.trigger,function(){return t.v=t.dv,t.setup(),t.settings.clicked&&t.settings.clicked(t.trigger,t.target,t.power),!1})},setup:function(){var t=this;this.timer||(this.timer=setInterval(function(){t.animate()},this.time))},animate:function(){var t=this;t.power=t.finish[t.change](),t.power+=t.v,t.power=Math.max(0,t.power),t.power=Math.min(t.power,t.full),t.finish[t.change](t.power),t.power==t.full&&t.settings.callback&&t.settings.callback.call(this,t.trigger,t.target,t.power),t.settings.progress&&t.settings.progress(t.trigger,t.target,t.power),t.a=t.da+1*t.power/t.full,t.v-=t.a,t.power<=0&&(clearInterval(t.timer),t.timer=null)}},i});