!function(t,e){"function"==typeof define&&define.amd?define("click-progress",["$"],e):"object"==typeof exports?module.exports=e():t.ClickProgress=e(window.Zepto||window.jQuery||$)}(this,function(t){function e(){}return t.fn.ClickProgress=function(i){var n=[];return t(this).each(function(){var r=new e,s=t.extend({trigger:t(this)},i);r.init(s),n.push(r)}),n},e.prototype={init:function(e){this.settings=e,this.trigger=t(e.trigger),this.target=t(e.target),this.v=e.v||10,this.dv=this.v,this.a=e.a||1,this.change=e.change||"height",this.time=e.time||30,this.range="height"==this.change?t(this.target).height():t(this.target).width(),this.finish=this.target.children().first(),this.full=this.target[this.change](),this.power=1,this.bindEvent()},touch:function(e,i,n){function r(t){return n.call(this,t)}var s;"function"==typeof i&&(n=i),t(e).on("touchmove",i,function(t){s=!0}).on("touchend",i,function(t){if(t.preventDefault(),!s){var e=n.call(this,t,"touch");e===!1&&(t.preventDefault(),t.stopPropagation())}s=!1}),t(e).on("click",i,r)},bindEvent:function(){var t=this;this.touch(this.trigger,function(){t.v=t.dv,t.setup(),t.settings.clicked&&t.settings.clicked(t.trigger,t.target,t.power)})},setup:function(){var t=this;this.timer||(this.timer=setInterval(function(){t.power<=0&&(clearInterval(t.timer),t.timer=null),t.power=t.finish[t.change](),t.power+=t.v,t.power=Math.max(0,t.power),t.power=Math.min(t.power,t.full),t.finish[t.change](t.power),t.power==t.full&&(clearInterval(t.timer),t.settings.callback&&t.settings.callback(t.trigger,t.target,t.power)),t.settings.progress&&t.settings.progress(t.trigger,t.target,t.power),t.v-=t.a},this.time))}},e});